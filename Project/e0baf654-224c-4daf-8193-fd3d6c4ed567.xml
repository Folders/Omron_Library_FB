{"CLs":[{"__type":"LD","Ix":1,"Not":true,"Var":"Started"},{"__type":"LD","Var":"Enabled","X":1},{"__type":"ST","Ix":2,"Var":"Initializing","X":2},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":7,"Type":"ANY","Var":"_eDBC_STATUS#_DBC_STATUS_IDLE"}],"Ix":9,"Name":"@MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":8,"Type":"ANY","Var":"MyDB.Sta.Service.Status"}],"X":2,"Y":1,"Id":"73f59aee-c085-4960-a17e-1a380000000b"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":5,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyDB.Sta.Service.Status"},{"__type":"PRM","Arg":"In2","Ix":6,"Type":"ANY_ELEMENTARY, ENUM","Var":"_eDBC_STATUS#_DBC_STATUS_RUNNING"}],"Ix":10,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":2,"PL":true},{"__type":"ST","Ix":3,"S":true,"Var":"Started","X":3,"Y":2},{"__type":"ST","Ix":4,"RS":true,"Var":"MyDB.Cmd.Request","X":2,"Y":3},{"__type":"HL","X":3},{"__type":"HL","X":3,"Y":1},{"__type":"HL","X":3,"Y":3}],"CMT":"S01V00R00 - 2024.05.14 - PC\u000d\u000a- First version\u000d\u000a\u000d\u000aS01V01R00 - 2024.06.11 - PC\u000d\u000a- Add status and check before connection\u000d\u000a\u000d\u000aS01V02R00 - 2024.06.19 - PC\u000d\u000a- Starting error management and logging\u000d\u000a\u000d\u000aS01V03R00 - 2024.06.26 - PClo\u000d\u000a- Try to avoid a fault log at startup.\u000d\u000a- Improve fault management\u000d\u000a- Taking out logging fault\u000d\u000a\u000d\u000a____________________________________________________________________________________________________________________________________\u000d\u000a\u000d\u000aStarting DB manager and checking if DB service is ready to work","LRI":11,"RRI":12,"VLs":[{"Ix":13,"X":2},{"Ix":13,"X":2,"Y":1},{"Ix":13,"X":2,"Y":2}]}
{"CLs":[{"__type":"LD","Var":"Enabled"},{"__type":"LD","Ix":7,"Var":"Started","X":1},{"__type":"ST","Ix":8,"Var":"MyDB.Sta.Enabled","X":2},{"__type":"LD","Ix":2,"Not":true,"Var":"MyDB.Cmd.Request","X":2,"Y":1},{"__type":"LD","Ix":3,"Not":true,"Var":"MyDB.Cmd.Close","X":3,"Y":1},{"__type":"ST","Ix":10,"Var":"MyDB.Sta.Ready","X":4,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"In"}],"Ix":15,"Name":"Up","Out":[{"__type":"PF","Arg":""}],"X":4,"Y":2,"Id":"73f59aee-c085-4960-a17e-1a3800000020"},{"__type":"ST","Ix":14,"RS":true,"Var":"MyDB.Cmd.Need_DB","X":5,"Y":2},{"__type":"LD","Ix":4,"Var":"MyDB.Cmd.Close","X":2,"Y":3},{"__type":"ST","Ix":11,"Var":"MyDB.Sta.Closed","X":3,"Y":3},{"__type":"LD","Ix":5,"Var":"MyDB.Cmd.Done","X":2,"Y":4},{"__type":"ST","Ix":12,"Var":"MyDB.Sta.Done","X":3,"Y":4},{"__type":"LD","Ix":1,"Var":"MyDB.Cmd.Request","X":2,"Y":5},{"__type":"ST","Ix":9,"S":true,"Var":"Order_Connection","X":3,"Y":5},{"__type":"LD","Ix":6,"Var":"MyDB.Cmd.Need_DB","X":2,"Y":6},{"__type":"ST","Ix":13,"Var":"MyDB.Sta.Need_DB","X":3,"Y":6},{"__type":"HL","X":3},{"__type":"HL","X":4},{"__type":"HL","X":5},{"__type":"HL","X":5,"Y":1},{"__type":"HL","X":4,"Y":3},{"__type":"HL","X":5,"Y":3},{"__type":"HL","X":4,"Y":4},{"__type":"HL","X":5,"Y":4},{"__type":"HL","X":4,"Y":5},{"__type":"HL","X":5,"Y":5},{"__type":"HL","X":4,"Y":6},{"__type":"HL","X":5,"Y":6}],"CMT":"Status of DB","LRI":16,"RRI":17,"VLs":[{"Ix":18,"X":2},{"Ix":18,"X":2,"Y":1},{"Ix":18,"X":2,"Y":2},{"Ix":18,"X":2,"Y":3},{"Ix":18,"X":2,"Y":4},{"Ix":18,"X":2,"Y":5},{"Ix":19,"X":4,"Y":1}]}
{"CLs":[{"__type":"LD","Not":true,"Var":"MyDB.Cmd.Request"},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":3,"Type":"TIME","Var":"T#12s"}],"Ix":5,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":4,"Type":"TIME","Var":""}],"X":1,"Var":"Wait_Deco"},{"__type":"LD","Ix":1,"Not":true,"Var":"Enabled","Y":1},{"__type":"HL","X":1,"Y":1},{"__type":"ST","Ix":2,"RS":true,"Var":"Order_Connection","X":2}],"CMT":"Reset connection if not used after some time","LRI":6,"RRI":7,"VLs":[{"Ix":8,"X":2}]}
{"CLs":[{"__type":"LD","Var":"Order_Connection"},{"__type":"LD","Ix":1,"Not":true,"Var":"ResetConn","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"DBConnectionName","Ix":5,"Type":"STRING","Var":"Name"}],"Ix":14,"Name":"DB_Connect","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":6,"Type":"BOOL","Var":"Busy"},{"__type":"PRM","Arg":"Error","Ix":7,"Type":"BOOL","Var":"Error"},{"__type":"PRM","Arg":"ErrorID","Ix":8,"Type":"WORD","Var":"ErrorID"},{"__type":"PRM","Arg":"DBConnection","Ix":9,"Type":"DWORD","Var":"MyDB.DBConnection"}],"X":2,"Var":"Conn_DB"},{"__type":"ST","Ix":2,"S":true,"Var":"MyDB.Sta.Connected","X":3},{"__type":"ST","Ix":4,"RS":true,"Var":"InFault","X":3,"Y":1},{"__type":"F","In":[{"__type":"PF","Arg":"In"}],"Ix":16,"Name":"Down","Out":[{"__type":"PF","Arg":""}],"X":2,"Y":2,"Id":"73f59aee-c085-4960-a17e-1a3800000040"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"DBConnection","Ix":10,"Type":"DWORD","Var":"MyDB.DBConnection"}],"Ix":15,"Name":"DB_Close","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":11,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":12,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":13,"Type":"WORD","Var":""}],"X":3,"Y":2,"Var":"Deco_DB"},{"__type":"ST","Ix":3,"RS":true,"Var":"MyDB.Sta.Connected","X":4,"Y":2},{"__type":"HL","X":4},{"__type":"HL","X":4,"Y":1}],"CMT":"Connection management","LRI":17,"RRI":18,"VLs":[{"Ix":19,"X":2},{"Ix":19,"X":2,"Y":1},{"Ix":20,"X":3}]}
{"CLs":[{"__type":"LD","Var":"MyDB.Cmd.GetStatus"},{"__type":"LD","Ix":1,"Var":"Initializing","Y":1},{"__type":"LD","Id":"73f59aee-c085-4960-a17e-1a3800000048","Ix":2,"Up":true,"Var":"T_1s","X":1,"Y":1},{"__type":"HL","X":1},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"DBConnectionName","Ix":3,"Type":"STRING","Var":"Name"}],"Ix":12,"Name":"DB_GetConnectionStatus","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":4,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":6,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ConnectionStatus","Ix":7,"Type":"_sDBC_CONNECTION_STATUS","Var":"MyDB.Sta.Connection"}],"X":2,"Var":"GetConnection"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"}],"Ix":13,"Name":"DB_GetServiceStatus","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":8,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":9,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":10,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"ServiceStatus","Ix":11,"Type":"_sDBC_SERVICE_STATUS","Var":"MyDB.Sta.Service"}],"X":2,"Y":1,"Var":"GetService"}],"CMT":"Get info","LRI":14,"RRI":15,"VLs":[{"Ix":16,"X":2}]}
{"CLs":[{"__type":"LD","Ix":2,"Var":"Started"},{"__type":"LD","Var":"Conn_DB.Error","X":1},{"__type":"LD","Ix":1,"Var":"InFault","X":1,"Y":1},{"__type":"ST","Ix":4,"S":true,"Var":"InFault","X":2},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":5,"Type":"TIME","Var":"T#5s"}],"Ix":7,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":6,"Type":"TIME","Var":""}],"X":2,"Y":1,"Var":"Wait_ConnReset"},{"__type":"ST","Ix":3,"Var":"ResetConn","X":3,"Y":1},{"__type":"HL","X":3}],"CMT":"_______________________________________________________________________________________________________\u000a|   Error management                                                                                                                         |\u000a|______________________________________________________________________________________________________|\u000d\u000a\u000d\u000aLog connection fault","LRI":8,"RRI":9,"VLs":[{"Ix":10,"X":2},{"Ix":11,"X":1}]}
{"CLs":[{"__type":"LD","Var":"MyDB.Cmd.Request"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In1","Ix":2,"Type":"ANY_ELEMENTARY, ENUM","Var":"MyDB.Sta.Id"},{"__type":"PRM","Arg":"In2","Ix":3,"Type":"ANY_ELEMENTARY, ENUM","Var":"UINT#0"}],"Ix":7,"Name":"=","Out":[{"__type":"PF","Arg":""}],"X":1,"PL":true},{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Ix":4,"Type":"TIME","Var":"T#100ms"}],"Ix":6,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":5,"Type":"TIME","Var":""}],"X":2,"Var":"Wait_AutoReset"},{"__type":"ST","Ix":1,"RS":true,"Var":"MyDB.Cmd.Request","X":3}],"CMT":"If a DB_Connect dosn't reset the command, auto reset ","LRI":8,"RRI":9,"VLs":[]}
